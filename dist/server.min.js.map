{"version":3,"sources":["server.js"],"names":["express","require","app","port","process","env","PORT","bodyParser","use","json","extended","Pool","connectionParams","DATABASE_URL","connectionString","ssl","rejectUnauthorized","user","host","database","password","console","log","get","err","version_results","rows","pool","query","res","version","teamNumber","teamMembers","team_members_results","module","exports"],"mappings":"aAAA,IAAMA,QAAUC,QAAQ,WAClBC,IAAMF,UADNA,WAAUC,QAAQ,eAGlBE,KAAOC,QAAQC,IAAIC,MAAQ,IADjCJ,IAAMK,IAAAA,cAAaN,OAOnBC,IAAIM,IAAID,WAAWE,QAAnBP,IAAIM,IAAID,WAAWE,WAEnB,CAAAC,UAAA,KAC8B,IAG9BC,KAAAV,QAAA,MAAAU,KACMA,iBAAc,KAEpBC,iBACgC,MAA5BR,QAAQC,IAAIQ,aADI,CAGlBC,iBAAkBV,QAAQC,IAAIQ,aAFhCE,IAAIX,CAAAA,oBAAA,IAGIY,CAADC,KAAA,WAFaC,KAAnB,YADDC,SAKK,MAEJP,SAAAA,WACCK,KAAI,MAGJG,QAAAA,IAAQR,kBACRT,IAAAA,KAAM,IAAAQ,KAAAC,kBAGRS,IAAAA,IAAQC,IAAIV,SAAAA,EAAAA,GACZS,QAAUC,IAAG,WAASV,EAAAA,IAAAA,WAItBV,KAAIqB,MAAJ,mBAAa,SAAcC,EAAAC,GAC1BJ,QAAOC,IAAPE,EAAYC,EAAaC,MACzBC,KAAIC,MAAJ,6BAA+B,SAACJ,EAAKC,GACrCJ,QAAAA,IAAQC,EAAIE,GACZG,EAAAA,OAAKC,QAAM,CACXP,WAAO,EACPQ,gBAAWJ,EAASC,KAAA,GAAAI,QACpBC,YAAAA,EADoBL,OAGpBM,QAAAA,IAAAA,iBAAaC,EAAAA,IAAAA,uBASdC,OAAOC,QAAUjC","file":"server.min.js","sourcesContent":["const express = require('express')\r\nconst app = express()\r\nconst bodyParser = require('body-parser');\r\nconst port = process.env.PORT || 5000\r\n\r\n//View Engine\r\napp.set(\"view engine\", \"pug\")\r\n\r\n//parse app\r\napp.use(bodyParser.json());\r\n\r\n//parse xww-app\r\napp.use(bodyParser.urlencoded({extended:true}));\r\n\r\n\r\n//Database\r\nconst Pool = require('pg').Pool\r\n\r\nvar connectionParams = null;\r\nif (process.env.DATABASE_URL != null){\r\n\tconnectionParams = {\r\n\t\tconnectionString: process.env.DATABASE_URL,\r\n\t\tssl: {rejectUnauthorized: false}\r\n\t}\r\n}else{\r\n\t\r\n\tconnectionParams = {\r\n\t\tuser: 'api_user',\r\n\t\thost: 'localhost',\r\n\t\tdatabase: 'api',\r\n\t\tpassword: 'password',\r\n\t\tport: 5432\r\n\t}\r\n}\r\nconsole.log(connectionParams)\r\nconst pool = new Pool(connectionParams)\r\n\t\r\n\t\r\n\r\napp.get('/', (req, res) => {\r\n console.log('Accept: ' + req.get('Accept'))\r\n pool.query('SELECT VERSION()', (err, version_results) => {\r\n console.log(err, version_results.rows)\r\n pool.query('SELECT * FROM team_members', (err, team_members_results) => {\r\n console.log(err, team_members_results)\r\n res.render('index', {\r\n teamNumber: 3,\r\n databaseVersion: version_results.rows[0].version,\r\n teamMembers: team_members_results.rows\r\n })\r\n console.log('Content-Type: ' + res.get('Content-Type'))\r\n })\r\n })\r\n})\r\n\r\n\r\n\r\nmodule.exports = app;"]}